\begin{figure}
\centering

\begin{align*}
    &\indtype{\Sigma}{I_k} = \Pi \Delta_p . \Pi \Delta_{a_k} . \omega_k \\
    &\constrtype{\Sigma}{c_\ell}{\langle s_i \rangle} = \\
    &\qquad \Pi \Delta_p . \Pi \Delta_\ell [\langle I_i^\infty \coloneqq I_i^{s_i} \rangle] . I_{k_\ell}^{\hat{s}_{k_\ell}}\ \dom{\Delta_p}\ \vec{t}_\ell \\
    &\motivetype{\Sigma}{\vec{p}}{\omega}{I_k^s} = \\
    &\qquad \Pi \Delta_{a_k}[\dom{\Delta_p} \coloneqq \vec{p}] . \Pi \_ : I_k^s\ \vec{p}\ \dom{\Delta_{a_k}} . \omega \\
    &\branchtype{\Sigma}{\vec{p}}{c_\ell}{\langle s_i \rangle}{p} = \\
    &\qquad \Pi \Delta_\ell [\langle I_i^\infty \coloneqq I_i^{s_i} \rangle][\dom{\Delta_p} \coloneqq \vec{p}] . p\ \vec{t}_\ell\ (c_\ell\ \vec{p}\ \dom{\Delta_\ell}) \\
    &\textit{where}\quad k \in \langle i \rangle, \ell \in \langle j \rangle, \\
    &\quad\qquad\big(\Delta_p \vdash \langle I_i\ \_ : \Pi\Delta{a_i} . \omega_i \rangle \coloneqq \langle c_j : \Pi \Delta_j . I_{k_j}\ \_\ \vec{t}_j \big \rangle) \in \Sigma
\end{align*}

\caption{Metafunctions for typing rules}
\label{fig:metafunctions}
\end{figure}